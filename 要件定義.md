# Unity 版 仕様書

（※ Unreal Engine 固有の用語・機能をすべて Unity 用語に置き換えています）

---

### ゲーム概要

回転する正方形のアリーナ内で、緑色のボールを壁にバウンドさせながらオレンジ色のターゲット（球体）をすべて消し、制限時間内にハイスコアを狙うシンプルな物理パズル／アクションゲーム。\*\*Unity 2022 LTS 以降（URP 推奨）\*\*で制作する。

---

## 必要な要素

| カテゴリ            | 要素                                       | 詳細                                                                                                          |
| --------------- | ---------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **プレイ空間**       | アリーナ                                     | 45° 回転した正方形の床（チェッカーパターン）。外周に厚い壁を 4 枚配置。壁と床は同一親 `GameObject` にまとめ、回転させる。                                     |
| **プレイヤーオブジェクト** | 緑色のボール                                   | `Rigidbody` + `SphereCollider`。反発係数高めの **Physic Material** を設定。`Trail Renderer` とヒット時 `ParticleSystem` を付与。 |
| **ターゲット**       | オレンジ色の球体 × 約 20 個                        | 床上に固定配置。`SphereCollider`（**Is Trigger = true**）。衝突で消滅しスコア +1。発光マテリアル & ヒット時エフェクト。                           |
| **UI**          | スコア表示                                    | 画面左上に **TextMeshProUGUI** で “SCORE” と現在値（整数）。                                                               |
|                 | タイマー表示                                   | “TIME” と経過秒（小数第2位まで）。30 秒を上限にカウントアップまたはカウントダウン。                                                             |
| **操作**          | アリーナ回転                                   | 左右キー / A・D などで時計回り・反時計回りに一定角速度で回転。                                                                          |
| **ゲームロジック**     | クリア条件                                    | 全ターゲット消滅、または制限時間経過で終了。                                                                                      |
| **演出**          | カメラ                                      | 斜め上固定俯瞰。カメラは回転させず、アリーナのみ回す（`Cinemachine` Virtual Camera 推奨）。                                                |
|                 | サウンド                                     | 壁バウンド音、ターゲット破壊音、クリア／タイムアップジングル（`AudioSource` + `AudioClip`）。                                                |
| **拡張要素 (任意)**   | レベルバリエーション、複数ボール、障害物、加速度変化、オンラインランキングなど。 |                                                                                                             |

---

## 仕様・要件

### 1. 物理・コリジョン

| 項目    | Unity 実装内容                                                                                       |
| ----- | ------------------------------------------------------------------------------------------------ |
| エンジン  | **Unity 2022 LTS 以降**（言語: **C#**, スクリプト継承元: `MonoBehaviour`）。                                    |
| ボール   | `SphereCollider` + `Rigidbody` (Mass ≈ 1)。Physic Material: **Bounciness 0.8 – 1.0, Friction 0**。 |
| 壁     | `BoxCollider`（Is Trigger = false）。壁 4 枚を床と同じ親に配置し、親 `GameObject` を回転させる。                         |
| ターゲット | `SphereCollider`（Is Trigger = true）。`OnTriggerEnter` 内でターゲットを `Destroy` しスコア加算。                  |

### 2. 入力 & 回転制御

* 新 Input System もしくは従来 `Input.GetAxis("Horizontal")` で左右入力を取得。
* `arenaRoot.transform.Rotate(0, 0, anglePerFrame * input)` で毎フレーム Yaw (または Z 軸) を加算。
* 角速度例：±60°/sec。慣性を付けたい場合は `Mathf.Lerp` で補間。

### 3. ゲームフロー

1. **開始**

   * ボールを中央付近に `Instantiate`／`Rigidbody.velocity = Vector3.zero`。
   * タイマーを 0 秒でスタート。

2. **プレイ中**

   * 毎 `Update` でタイマー加算。
   * ターゲット残数をチェック（`targetsRemaining == 0` ならクリア）。

3. **終了判定**

   * 全ターゲット消滅 → クリア。
   * タイムリミット到達 → タイムアップ。

4. **リザルト**

   * スコア・タイム表示、`Button` でリトライ（`SceneManager.LoadScene`）。

### 4. UI 実装

* **Unity UI (uGUI)** もしくは **UI Toolkit**。
* 文字は **TextMeshPro**、白文字＋ドロップシャドウ（`Outline`, `Shadow`）。
* スコア／タイマー値はスクリプトで `textComponent.text = value.ToString("F2")` 等でバインド。

### 5. アセット

| 種類     | 最低限必要なもの                                               |
| ------ | ------------------------------------------------------ |
| メッシュ   | 床 (`Plane`)、壁 (`Cube`)、ボール (`Sphere`)、ターゲット (`Sphere`) |
| マテリアル  | 床チェッカー、壁メタリック、ボール＆ターゲット発光 (`Emission`)                 |
| パーティクル | ボール衝突火花 (`ParticleSystem`)、ターゲット消滅フラッシュ                |
| サウンド   | 壁バウンド、ターゲット破壊、BGM/ジングル (`AudioClip`)                   |

### 6. パフォーマンス要件

* PC／コンソール：60 FPS 以上。モバイルはターゲット数・エフェクトを調整。
* 同期物理オブジェクトはボール 1 個＋壁 4 枚＋ターゲット 20 個と軽量。`Fixed Timestep` を 0.02 (50 Hz) 程度に。

---

## 推奨開発ステップ

1. **プロトタイプ**

   * 床・壁を子に持つ `arenaRoot` プレハブを作成し、回転入力スクリプトを実装。
   * ボールを生成し、壁反射を確認。

2. **ターゲット配置 & スコア**

   * `OnTriggerEnter` でターゲット消滅＆スコア加算。

3. **UI & タイマー**

   * uGUI／TMP でスコア・タイマー表示。

4. **演出追加**

   * エフェクト・サウンド・ポストプロセス（Bloom + Chromatic Aberration 等）。

5. **ゲームフロー**

   * クリア／ゲームオーバー画面とリトライ処理 (`Canvas` 切替か `SceneManager`)。

6. **調整 & 拡張**

   * 回転速度、バウンド係数、タイムリミット、レベル配置などを調整。

---

以上が Unity 実装向けの改訂版仕様書です。Unreal Engine 特有の「Actor / Blueprint / UMG / Overlap」などは、すべて Unity の `GameObject / C# MonoBehaviour / UI (uGUI) / Trigger` 相当へ置き換え済みです。
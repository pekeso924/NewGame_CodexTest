# AGENTS.md – How to work on this repo

## 開発の進め方

- テスト駆動開発を行ってください。まずはテストから作ってください。
- 最初に設定した要件をすべて満たしたとテスト結果で証明できるまで開発を止めないでください。
- インターネットに接続できないオフライン環境であるため、現在の環境で解決できる手法のみで進めてください。
- 仮にインターネットに接続できないことや環境が十分ではなく課題に出くわしたとしても、別の方法を臨機応変に探ってテスト駆動開発を完了してください。
- テストに受かることだけを目的に、テスト内容をゆるく書き換えるような対応はしないでください。テストを意図的に簡単にして合格を取り繕うような解決策は絶対にしてはいけません。
- もし実装が不可能と判断した場合は、1. 未実装の機能 と 2. 実装できない理由 をまとめたレポートを提出してください。
- 『実装不可能』と判断できるのは、論理的・客観的な根拠により不可能だと証明できた場合に限ります。根拠が示せない場合は「不可能」と結論づけないでください。

## コードの書き方

- テスト駆動開発
- お任せします。

## パッケージの取り扱い

- Unity用のパッケージはBuilt-inPachagesに同梱されています。インターネットに接続できないオフライン環境であるため、注意してください。

## テストについて

- 現在の環境で実行できる最大限のテストを行ってください。
- インターネットには接続できないため注意してください。
- Unity環境を使ったテストを中心に行ってください。
- Unity Test Frameworkパッケージを使うと便利だと思います。インターネット接続がないため、ビルトインまたはキャッシュされたテストフレームワークパッケージが存在します。それを利用してください。

## ⚠️ Packages ディレクトリの扱いに関する厳重注意

- `Packages/manifest.json` および `Packages/packages-lock.json` は  
  **セットアップスクリプトが自動で依存パッケージ（例：  
  "com.unity.test-framework", "com.unity.ext.nunit" など）を追記する**  
  仕組みになっています。  
- **これら 2 ファイルを `git checkout -- ...` や手動編集で  
  “元に戻す／削除する” 行為は厳禁** です。  
  依存が消え、テスト用 DLL が展開されずコンパイルが失敗します。  
- もし Manifest を編集する場合は  
  1. 変更前に現在の依存リストを確認  
  2. 必要不可欠なパッケージ（上記 test-framework など）が  
     残っていることを必ず確認  
  3. 変更後は **`Library/` を削除 → クリーンビルド → 自動テスト** を  
     実行し、ビルド＆テストが通ることを確認してからコミットすること  
- 上記ルールに違反してテストが失敗したコミットは **Reject** 対象。
